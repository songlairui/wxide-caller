const { resolve } = require('../utils')
const i = require(resolve('./3d1dfba33285839f5aa317a53698f4c5.js')),
  j = require(resolve('./1f28f42c846af07c2adfb1a5eb2d92b6.js')),
  k = require(resolve('./59a4de6f8f83ea2bc7d7a501d45d5c9d.js'))

const a = require('./tmp.json')
let tmp = {
  projectid: 'wx898945e5568b4ea3_wx-webview',
  condiction: {
    weapp: { current: -1, list: [] },
    search: { current: -1, list: [] },
    conversation: { current: -1, list: [] },
    plugin: { current: -1, list: [] },
    game: { list: [] }
  },
  setting: {
    urlCheck: false,
    es6: true,
    postcss: true,
    minified: true,
    newFeature: true
  },
  compileType: 'weapp',
  libVersion: '2.2.2',
  createTime: 1535093457053,
  accessTime: 1535097652288,
  packOptions: { ignore: [] },
  isAdmin: 1,
  isTourist: false,
  isGameTourist: false,
  hash: 311528874,
  appid: 'wx898945e5568b4ea3',
  projectname: 'wx-webview',
  projectpath: 'F:\\Coding\\wx-webview',
  appShowImageUrl:
    'http://wx.qlogo.cn/mmhead/ZqDaDiccbgkheF9QZWougtkaK1L04uekiaA0x4EzicOibHatuawANNR1ibA/0',
  attr: {
    network: {
      RequestDomain: ['https://e.9.cn', 'https://img.xmyunyou.com'],
      WsRequestDomain: ['wss://e.9.cn'],
      UploadDomain: ['https://e.9.cn'],
      DownloadDomain: ['https://e.9.cn'],
      BizDomain: []
    },
    setting: {
      MaxLocalstorageSize: 10,
      MaxCodeSize: 2,
      MaxWebviewDepth: 5,
      ExpendedMaxWebviewDepth: 10,
      MaxBackgroundLifespan: 300,
      MaxRequestConcurrent: 10,
      MaxUploadConcurrent: 10,
      MaxDownloadConcurrent: 10,
      MaxFileStorageSize: 10,
      MinTabbarCount: 2,
      MaxTabbarCount: 5,
      MaxTabbarIconSize: 40,
      MaxDataSize: 1048576,
      MaxWebsocketConnect: 2,
      GameDownloadFileSizeLimit: 50,
      DownloadFileSizeLimit: 10,
      SubContextImgDomain: [
        'https://wx.qlogo.cn/',
        'https://thirdwx.qlogo.cn/'
      ],
      ExpiresAtList: 432000,
      BackgroundNetworkInterruptedTimeout: 300,
      CanKeepAliveByAudioPlay: 1,
      LifeSpanBeforeSuspend: 5,
      LifeSpanAfterSuspend: 300,
      ActualWebviewDepth: 5,
      WebsocketSkipPortCheck: 0,
      MaxSubpackageSubCodeSize: 2,
      MaxSubpackageFullCodeSize: 8,
      MaxWorkerConcurrent: 1,
      ScanCodeEnableZZM: 0,
      MaxPluginSdkReadmeSize: 2,
      CanPreFetchData: 0,
      CanPeriodFetchData: 0,
      PeriodFetchData: 12,
      AppserviceMaxDataSize: 1048576,
      HTTPSetting: {
        HTTPHeaderMode: 'BlackList',
        HeaderBlackList: ['User-Agent'],
        HeaderWhiteList: [],
        UploadMaxTimeoutMS: 60000,
        DownloadMaxTimeoutMS: 60000,
        WebsocketMaxTimeoutMS: 60000,
        RequestMaxTimeoutMS: 60000,
        HTTPHeaderReferer: 'servicewechat.com'
      },
      CDNBaseURL: 'https://res.servicewechat.com/weapp',
      AppMaxRunningCount: 5,
      TempFileSizeLimitTotal: 300,
      MaxLocalStorageItemSize: 1048576,
      SyncLaunchSceneList: [1037, 1055],
      AttrSyncForceUpdateTime: 7,
      StarNumberLimitation: 10,
      DeadThreadMaxTimeToLive: 30,
      DeadThreadBanDuration: 1800,
      WidgetImageFlowLimitDuration: 1800,
      WidgetImageFlowLimitMaxSize: 307200,
      WidgetDrawMinInterval: 4500,
      NativeBufferSizeLimitByte: 10485760,
      NativeBufferQueueLimitByte: 314572800,
      GameMaxRunningCount: 1,
      GamePerfCollectSamplePercentage: 0.001,
      SyncVersionSetting: {
        PullVersionInterval: 21600,
        PullVersionWxaUsageLastInterval: 2592000,
        PullVersionMaxCount: 1000,
        PullVersionMaxCountPerRequest: 100
      },
      PackageManager: {
        CheckInterval: 86400,
        WithoutContactClearSeconds: 864000,
        ClientStoragePercent: 5,
        ClientStorageMinMB: 256
      },
      GamePerfCollectInterval: 60
    },
    platform: false,
    gameApp: false,
    platformNickname: '',
    appNickName: 'lary',
    appName: 'lary',
    appImageUrl:
      'http://wx.qlogo.cn/mmhead/ZqDaDiccbgkheF9QZWougtkaK1L04uekiaA0x4EzicOibHatuawANNR1ibA/0',
    appid: 'wx898945e5568b4ea3',
    released: false,
    minPublicLibVersion: '',
    searchWidget: true,
    userbanded: true,
    isSandbox: false,
    authQY: false,
    appType: 0,
    extInfo: { appid: '' }
  },
  appShowName: 'lary',
  scripts: {},
  storage: {
    openid: 'o6zAJs8eALtgZwsT_ZPQc5DEQEl0',
    cache: {
      logs: {
        data:
          '[1535097655239,1535097273969,1535097045106,1535097026228,1535094999146,1535094396920,1535094218105,1535093642596,1535093465303]',
        dataType: 'Array'
      },
      '__wxprivate__/cookies': { data: '', dataType: 'String' }
    }
  },
  svr: '',
  client: '',
  qcloudRoot: '',
  miniprogramRoot: '',
  pluginRoot: '',
  pluginInfo: [],
  pkgSize: {
    upload: 4521,
    uploadSubpackages: [{ name: '__FULL__', size: 4521 }],
    lastUploadTime: 1535094233318
  },
  uploadInfo: { version: '1.0.0' }
}
const v = `C:\\Users\\songlr\\AppData\\Local\\微信web开发者工具\\User Data\\Weappdest\\debug`

const m = (...x) => console.warn(...x)
async function run() {
  try {
    m('compilejsfilestart', '正在编译 JS 文件')
    await i(a, {
      distPath: v,
      onProgressUpdate: m,
      onFilesIgnored: m
    })
    m('compilejsfilestart', '编译 JS 文件完成')
    m('compileotherfilestart', '正在编译其他文件')
    await j(a, { distPath: v })
    await k(a, { distPath: v })
    m('compileotherfileend', '编译其他文件完成')
  } catch (a) {
    return o(a)
  }
}

setTimeout(run, 1)
